name: Build Nest Stream Flink JAR and Submit Jobs
on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  Build:
    name: Build Nest Stream Flink JAR
    runs-on: ubuntu-20.04
    timeout-minutes: 30

    steps:
      - name: Build
        run: echo 'Build'

      - name: Submit Jar
        run: echo 'Submit Jar'


  Deploy_product_product:
    name: Deploy_product_product
    if: github.event.ref == 'refs/heads/main'
    needs: [Build]
    # Set the type of machine to run on
    runs-on: ubuntu-20.04
    timeout-minutes: 30

    steps:
      - name: Submit product_product job
        run: echo 'Submit product_product job'
        
  Deploy_product_preorder_flashsale:
    name: Deploy_product_preorder_flashsale
    needs: [Build]
    # Set the type of machine to run on
    runs-on: ubuntu-20.04
    timeout-minutes: 30
    steps:
      - name: Submit product_preorder_flashsale job
        run: echo 'Submit product_preorder_flashsale job'

  Deploy_stock_pre_order_flashsale_used_quota:
    name: stock_pre_order_flashsale_used_quota
    needs: [Build]
    # Set the type of machine to run on
    runs-on: ubuntu-20.04
    timeout-minutes: 30
    steps:
      - name: Submit stock_pre_order_flashsale_used_quota job
        run: echo 'Submit stock_pre_order_flashsale_used_quota job'
        
  Deploy_stock_preorder_request:
    name: stock_preorder_request
    needs: [Build]
    # Set the type of machine to run on
    runs-on: ubuntu-20.04
    timeout-minutes: 30
    steps:
      - name: Submit stock_preorder_request job
        run: echo 'Submit stock_preorder_request job'
